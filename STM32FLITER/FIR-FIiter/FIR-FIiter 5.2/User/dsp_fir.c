   const double Gains[65] = {
? 0.0009479362407674,0.0009929350550642, 0.003930214337694,0.0004266602318381,
? ?0.002659113001781, 0.005817509119983,-0.000228463397681, 0.006702278150725,
? ?0.008005149622821,-0.0008554957856821, ?0.01422482817203, 0.008473933262289,
? -1.620146125747e-17, ?0.02516227532517, 0.004919104877225, 0.005096205867541,
? ? 0.03751085310479,-0.004203950025341, ?0.01799639204041, ? 0.0469989686148,
? ?-0.01876523334251, ?0.04251211195407, ?0.04699049465662, -0.03660751758108,
? ? 0.08342623579446, ?0.02691060679784, -0.05397754228244, ? 0.1541577471136,
? ?-0.04192656769609, -0.06664039473937, ? 0.3591036736045, ?-0.5005151692802,
? ? ?0.6415102143687, ?-0.5005151692802, ? 0.3591036736045, -0.06664039473937,
? ?-0.04192656769609, ? 0.1541577471136, -0.05397754228244, ?0.02691060679784,
? ? 0.08342623579446, -0.03660751758108, ?0.04699049465662, ?0.04251211195407,
? ?-0.01876523334251, ? 0.0469989686148, ?0.01799639204041,-0.004203950025341,
? ? 0.03751085310479, 0.005096205867541, 0.004919104877225, ?0.02516227532517,
? -1.620146125747e-17, 0.008473933262289, ?0.01422482817203,-0.0008554957856821,
? ?0.008005149622821, 0.006702278150725,-0.000228463397681, 0.005817509119983,
? ?0.002659113001781,0.0004266602318381, 0.003930214337694,0.0009929350550642,
? 0.0009479362407674
};

?double Buffer[ORDER]; ? ? ? ?//采样历史数据



double Fir(double Input)
{
? ? ? ? double Output=0.0; ? ? ? ?//数据输出
? ? ? ? unsigned int Index; ? ? ? ? ? ? ? ?//下标索引
? ? ?   
? ? ? ? //采样数据移位
? ? ? ? for(Index=ORDER;Index>0;Index--)?
Buffer[Index]=Buffer[Index-1];

? ? ? ? Buffer[0]=Input;
? ? ?   
? ? ? ? //计算输出
? ? ? ? for(Index=0;Index<ORDER+1;Index++)
? ? ? ? {
? ? ? ? ? ? ? ? Output+=Gains[Index]*Buffer[Index];
? ? ? ? }
? ? ?   
? ? ? ? return Output;
}