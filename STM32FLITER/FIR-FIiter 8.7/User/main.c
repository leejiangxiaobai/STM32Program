#include "stm32f10x.h"   // 相当于51单片机中的  #include <reg51.h>
#include "bsp_led.h"
#include "bsp_key.h"
#include "stdio.h"
#include "bsp_usart.h"
#include "arm_math.h"


extern void arm_fir_f32_lp(float32_t num,int i);
extern void arm_fir_initialize (void);
extern void arm_fir_printf(void);

static float32_t testInput_f32_50Hz_200Hz[542] ={
232.384,
232.597,
232.427,
232.501,
232.448,
232.453,
232.347,
232.315,
232.331,
232.357,
232.4,
232.405,
232.464,
232.469,
232.427,
232.267,
232.443,
232.373,
232.357,
232.448,
232.325,
232.427,
232.357,
232.341,
232.24,
232.336,
232.315,
232.325,
232.336,
232.331,
232.437,
232.368,
232.379,
232.325,
232.357,
232.432,
232.352,
232.341,
232.357,
232.405,
232.341,
232.421,
232.389,
232.421,
232.427,
232.368,
232.437,
232.331,
232.331,
232.517,
232.437,
232.357,
232.533,
232.587,
232.613,
232.539,
232.432,
232.608,
232.613,
232.843,
232.672,
232.555,
232.853,
232.875,
232.491,
232.352,
232.421,
232.8,
232.843,
232.736,
232.635,
232.693,
232.597,
231.915,
231.099,
230.752,
230.315,
230.725,
232.427,
232.427,
232.437,
232.443,
232.96,
232.795,
232.848,
232.763,
232.475,
232.608,
232.629,
232.459,
232.523,
232.544,
232.576,
232.613,
232.629,
232.629,
232.475,
232.453,
232.459,
232.88,
232.608,
232.629,
232.427,
232.309,
232.517,
232.389,
232.4,
232.619,
232.389,
232.224,
232.512,
232.512,
232.459,
232.347,
232.363,
232.251,
232.192,
232.272,
232.144,
232.24,
232.149,
231.696,
230.715,
230.192,
230.224,
230.229,
231.44,
231.909,
232.24,
232.155,
232.155,
232.133,
232.053,
231.973,
231.941,
231.963,
232.128,
231.984,
231.92,
231.989,
232.043,
231.941,
231.915,
231.915,
231.931,
231.845,
232.005,
231.936,
231.824,
232.011,
231.936,
232.133,
232.032,
231.915,
231.941,
232.032,
231.947,
231.867,
232.219,
232.165,
231.925,
231.669,
232.133,
232.139,
232.149,
232.213,
232.229,
232.149,
232.059,
232.395,
232.299,
231.861,
231.973,
231.931,
232.315,
232,
232.389,
231.904,
232.405,
232.352,
232.171,
232.128,
232.368,
232.117,
232.347,
232.181,
232.165,
232.059,
232.128,
232.272,
232.325,
232.016,
232.315,
231.989,
232.149,
232.059,
232.128,
232.32,
232.16,
232.165,
232.139,
231.989,
232.123,
232,
232.32,
231.984,
232.053,
232.059,
232.107,
231.771,
232.261,
232.224,
231.947,
231.979,
231.92,
232.224,
232.139,
231.952,
232.128,
231.957,
231.845,
231.851,
231.669,
231.712,
231.904,
231.915,
231.915,
231.925,
231.931,
231.925,
231.867,
231.963,
232.075,
231.904,
232.352,
231.915,
231.915,
231.861,
232.128,
231.856,
231.733,
231.723,
231.915,
231.835,
231.872,
231.947,
231.915,
231.904,
231.92,
231.856,
231.739,
231.925,
232.064,
231.957,
231.861,
231.915,
231.755,
231.915,
231.92,
231.904,
231.787,
231.92,
231.92,
231.904,
232.059,
231.845,
231.829,
232.048,
231.936,
231.931,
231.909,
231.829,
231.899,
231.824,
232.037,
232.011,
231.936,
231.904,
231.925,
231.915,
232.048,
231.941,
232.037,
231.931,
232.133,
232.128,
231.995,
232.069,
232.139,
232.133,
232.144,
232.155,
232.245,
232.219,
232.395,
232.421,
232.235,
232.256,
232.16,
232.139,
232.261,
232.341,
232.427,
232.187,
232.133,
232.443,
232.384,
232.427,
232.432,
232.4,
232.251,
232.491,
232.267,
232.325,
232.528,
232.453,
232.475,
232.496,
232.603,
232.448,
232.437,
232.501,
232.485,
232.832,
232.661,
232.88,
232.64,
232.539,
232.517,
232.725,
232.8,
232.688,
232.688,
232.832,
232.832,
232.741,
232.843,
232.672,
232.507,
232.613,
232.619,
232.608,
232.613,
232.613,
232.587,
232.624,
232.619,
232.565,
232.528,
232.624,
232.704,
232.624,
232.517,
232.512,
232.72,
232.72,
232.576,
232.405,
232.608,
232.619,
232.485,
232.603,
232.624,
232.475,
232.688,
232.619,
232.432,
232.523,
232.453,
232.453,
232.453,
232.443,
232.229,
232.613,
232.635,
232.613,
232.208,
232.549,
232.864,
232.437,
232.603,
232.427,
232.437,
232.427,
232.613,
232.832,
232.661,
232.416,
232.507,
232.453,
232.373,
232.336,
232.8,
232.448,
232.592,
232.608,
232.448,
232.432,
232.32,
232.347,
232.421,
232.352,
232.469,
232.48,
232.507,
232.427,
232.581,
232.603,
232.549,
232.4,
232.437,
232.592,
232.459,
232.597,
232.341,
232.693,
232.507,
232.443,
232.549,
232.715,
232.661,
232.523,
232.475,
232.619,
232.608,
232.715,
232.496,
232.763,
232.859,
232.672,
232.507,
232.853,
232.421,
232.683,
232.72,
232.709,
232.507,
232.613,
232.608,
232.688,
232.608,
232.485,
232.437,
232.421,
232.288,
232.704,
232.613,
232.576,
232.4,
232.613,
232.384,
232.597,
232.427,
232.501,
232.448,
232.453,
232.347,
232.315,
232.331,
232.357,
232.4,
232.405,
232.464,
232.469,
232.427,
232.267,
232.443,
232.373,
232.357,
232.448,
232.325,
232.427,
232.357,
232.341,
232.24,
232.336,
232.315,
232.325,
232.336,
232.331,
232.437,
232.368,
232.379,
232.325,
232.357,
232.432,
232.352,
232.341,
232.357,
232.405,
232.341,
232.421,
232.389,
232.421,
232.427,
232.368,
232.437,
232.331,
232.331,
232.517,
232.437,
232.357,
232.533,
232.587,
232.613,
232.539,
232.432,
232.608,
232.613,
232.843,
232.672,
232.555,
232.384,
232.597,
232.427,
232.501,
232.448,
232.453,
232.347,
232.315,
232.331,
232.357,
232.4,
232.405,
232.464,
232.469,
232.427,
232.267,
232.443,
232.373,
232.357,
232.448,
232.325,
232.427,
232.357,
232.341,
232.24,
232.336,
232.315,
232.325,
232.336,
232.331,}; /* 采样点 */



void Delay( uint32_t count )
{
	for(; count!=0; count--);
}

int cur = 0;

int main(void)
{
	// 来到这里的时候，系统的时钟已经被配置成72M。
	LED_GPIO_Config();
	KEY_GPIO_Config();
	USART_Config();
	
	//滤波初始化
	arm_fir_initialize ();
	for(int i = 0;i< 542;i++){		
	
		  arm_fir_f32_lp(testInput_f32_50Hz_200Hz[i],i);
	}
	//完成最后的打印
	//arm_fir_printf();
}

// 作业

// 把KEY2的代码也完成，按一次，LED_R_TOGGLE

